(this["webpackJsonpreact-realtime-drawing-example"]=this["webpackJsonpreact-realtime-drawing-example"]||[]).push([[0],[,,,,function(e,t,n){e.exports=n(11)},function(e,t,n){},,,,,function(e,t,n){},function(e,t,n){"use strict";n.r(t);n(5);var c=n(0),r=n.n(c),a=n(3),l=n.n(a),o=n(1);n(10);const i=({ref:e,ctx:t,onReset:n})=>Object(c.useCallback)(()=>{if(t&&e.current){n&&n();const c=t.canvas.getBoundingClientRect(),r=c.height,a=c.width;t.clearRect(0,0,a*window.devicePixelRatio,r*window.devicePixelRatio);const l=e.current.getContext("2d");l&&l.clearRect(0,0,a*window.devicePixelRatio,r*window.devicePixelRatio)}},[t,e,n]),s=({ref:e,ctx:t,onApply:n})=>Object(c.useCallback)(()=>{if(t&&e.current){n&&n();const c=e.current.getContext("2d");c&&(c.drawImage(t.canvas,0,0),t.clearRect(0,0,t.canvas.width,t.canvas.height))}},[t,e,n]),u=({ctx:e,onDraw:t})=>Object(c.useCallback)(n=>{if(t&&t(n),e&&n.length){const t=e.canvas.getBoundingClientRect(),r=t.width,a=t.height;if(e.lineJoin="round",e.lineCap="round",e.strokeStyle=n[0].color,e.fillStyle=n[0].color,e.lineWidth=Math.floor(n[0].strokeWidth*Math.sqrt(Math.pow(r,2)+Math.pow(a,2))),e.clearRect(0,0,r,a),n.length<3)return e.beginPath(),e.arc(n[0].x*r,n[0].y*a,e.lineWidth/2,0,2*Math.PI),e.fill(),void e.closePath();e.beginPath(),e.moveTo(n[0].x*r,n[0].y*a);for(var c=1;c<n.length-2;c++)e.quadraticCurveTo(n[c].x*r,n[c].y*a,(n[c].x+n[c+1].x)*r/2,(n[c].y+n[c+1].y)*a/2);e.quadraticCurveTo(n[c].x*r,n[c].y*a,n[c+1].x*r,n[c+1].y*a),e.stroke()}},[e,t]),m=["#134e6f","#ff6150","#1ac0c6"],h=({current:e,onChange:t})=>c.createElement("figure",{className:"control"},c.createElement("figcaption",null,"Colors"),c.createElement("ul",null,m.map(n=>c.createElement("li",{key:n},c.createElement(d,{color:n,onClick:t,active:e===n}))))),d=({color:e,onClick:t,active:n})=>{const r=c.useCallback(()=>{t(e)},[t,e]);return c.createElement("button",{className:"swatch-button".concat(n?" active":""),style:{backgroundColor:e},onClick:r,"aria-label":"Select ".concat(e," color"),title:"Select ".concat(e," color")})},p=[8,16,32],b=({current:e,onChange:t})=>c.createElement("figure",{className:"control"},c.createElement("figcaption",null,"Sizes"),c.createElement("ul",null,p.map(n=>c.createElement("li",{key:n},c.createElement(f,{size:n,onClick:t,active:e===n}))))),f=({size:e,onClick:t,active:n})=>{const r=c.useCallback(()=>{t(e)},[t,e]);return c.createElement("button",{className:"size-button".concat(n?" active":""),onClick:r,"aria-label":"Select  ".concat(e),title:"Select size ".concat(e)},c.createElement("div",{style:{height:e,width:e}}))},g=()=>c.createElement("footer",{className:"app-footer"},c.createElement("p",null,c.createElement("span",{role:"img","aria-label":"rocket emoji"},"\ud83d\ude80"),"Made by ",c.createElement("a",{href:"https://www.jsaari.com/",rel:"noreferrer noopener"},"Jim Saari"))),E=()=>c.createElement("header",{className:"app-header"},c.createElement("h1",null,"React Realtime Drawing"),c.createElement("a",{className:"app-repository",href:"https://github.com/jsaari97/react-realtime-drawing",title:"View project repository","aria-label":"View project repository"},c.createElement("svg",{"aria-hidden":!0,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},c.createElement("path",{d:"M12,2.2467A10.00042,10.00042,0,0,0,8.83752,21.73419c.5.08752.6875-.21247.6875-.475,0-.23749-.01251-1.025-.01251-1.86249C7,19.85919,6.35,18.78423,6.15,18.22173A3.636,3.636,0,0,0,5.125,16.8092c-.35-.1875-.85-.65-.01251-.66248A2.00117,2.00117,0,0,1,6.65,17.17169a2.13742,2.13742,0,0,0,2.91248.825A2.10376,2.10376,0,0,1,10.2,16.65923c-2.225-.25-4.55-1.11254-4.55-4.9375a3.89187,3.89187,0,0,1,1.025-2.6875,3.59373,3.59373,0,0,1,.1-2.65s.83747-.26251,2.75,1.025a9.42747,9.42747,0,0,1,5,0c1.91248-1.3,2.75-1.025,2.75-1.025a3.59323,3.59323,0,0,1,.1,2.65,3.869,3.869,0,0,1,1.025,2.6875c0,3.83747-2.33752,4.6875-4.5625,4.9375a2.36814,2.36814,0,0,1,.675,1.85c0,1.33752-.01251,2.41248-.01251,2.75,0,.26251.1875.575.6875.475A10.0053,10.0053,0,0,0,12,2.2467Z"}))));var v=()=>{const e=c.useState("#134e6f"),t=Object(o.a)(e,2),n=t[0],r=t[1],a=c.useState(16),l=Object(o.a)(a,2),m=l[0],d=l[1],p=(()=>{const e=Object(c.useRef)(null),t=Object(c.useState)(null),n=Object(o.a)(t,2),r=n[0],a=n[1],l=Object(c.useRef)(0),m=Object(c.useState)(!1),h=Object(o.a)(m,2),d=h[0],p=h[1],b=Object(c.useCallback)(()=>{l.current=0},[]),f=s({ref:e,ctx:r,onApply:b}),g=Object(c.useCallback)(e=>{d||p(!0),1===e.length&&0===l.current||e.length<l.current?f():l.current=e.length},[f,d]),E=u({ctx:r,onDraw:g}),v=Object(c.useCallback)(()=>{l.current=0,p(!1)},[]),w=i({ref:e,ctx:r,onReset:v});return Object(c.useEffect)(()=>{if(e.current){if(r)return;if(!e.current.parentElement)return void console.warn("canvas needs to be inside a parent node");const t=e.current.parentElement.getBoundingClientRect(),n=t.width,c=t.height;e.current.parentElement.style.position="relative",e.current.height=c,e.current.width=n;const l=document.createElement("canvas");l.style.position="absolute",l.style.left="0",l.style.top="0",l.height=c,l.width=n,l.style.pointerEvents="none",e.current.parentElement.insertAdjacentElement("beforeend",l),a(l.getContext("2d"))}},[e,r]),[e,E,{reset:w,dirty:d}]})(),f=Object(o.a)(p,3),v=f[0],w=f[1],j=f[2].reset,C=(({strokeWidth:e=16,color:t="#000",onChange:n}={})=>{const r=Object(c.useRef)(null),a=Object(c.useState)(null),l=Object(o.a)(a,2),m=l[0],h=l[1],d=Object(c.useRef)(0),p=Object(c.useRef)([]),b=Object(c.useState)(0),f=Object(o.a)(b,2),g=f[0],E=f[1],v=Object(c.useState)(!1),w=Object(o.a)(v,2),j=w[0],C=w[1],y=Object(c.useState)(!1),O=Object(o.a)(y,2),k=O[0],x=O[1],R=Object(c.useCallback)(()=>{x(!1),r.current&&m&&(r.current.onmousemove=null,r.current.ontouchmove=null,p.current=[],d.current=0)},[r,m]),S=s({ref:r,ctx:m,onApply:R}),N=u({ctx:m}),M=Object(c.useCallback)(c=>{if(r.current&&(d.current++,d.current%1===0||d.current<2)){const a=r.current.getBoundingClientRect(),l=a.width,o=a.height,i=a.left,s=a.top,u=c instanceof MouseEvent?c.pageX:c.changedTouches[0].pageX,m=c instanceof MouseEvent?c.pageY:c.changedTouches[0].pageY,h={x:Math.floor(u-i-window.pageXOffset)/l,y:Math.floor(m-s-window.pageYOffset)/o,color:t,strokeWidth:e/Math.sqrt(Math.pow(l,2)+Math.pow(o,2)),ratio:g};p.current.push(h),j||C(!0),n&&n(p.current),N(p.current)}},[r,N,t,e,n,g,j]);Object(c.useEffect)(()=>{if(r.current){if(m)return;if(!r.current.parentElement)return void console.warn("canvas needs to be inside a parent node");const e=r.current.parentElement.getBoundingClientRect(),t=e.width,n=e.height;r.current.parentElement.style.position="relative",r.current.height=n,r.current.width=t,r.current.style.touchAction="none",E(t/n);const c=document.createElement("canvas");c.style.position="absolute",c.style.left="0",c.style.top="0",c.height=n,c.width=t,c.style.pointerEvents="none",r.current.parentElement.insertAdjacentElement("beforeend",c),h(c.getContext("2d"))}},[r,m]),Object(c.useEffect)(()=>{if(r.current){const e=e=>{x(!0),M(e)};"ontouchstart"in window?(r.current.ontouchstart=e,r.current.ontouchend=S,r.current.ontouchcancel=S):(r.current.onmousedown=e,r.current.onmouseleave=S,r.current.onmouseup=S)}},[r,N,S,M]),Object(c.useEffect)(()=>{k&&r.current&&("ontouchstart"in window?r.current.ontouchmove=M:r.current.onmousemove=M)},[k,r.current,m]);const A=Object(c.useCallback)(()=>{d.current=0,p.current=[],C(!1)},[]),P=i({ref:r,ctx:m,onReset:A});return[r,{reset:P,dirty:j}]})({color:n,strokeWidth:m,onChange:w}),y=Object(o.a)(C,2),O=y[0],k=y[1],x=k.reset,R=k.dirty,S=c.useCallback(()=>{x(),j()},[x,j]);return console.log(R),c.createElement("div",{className:"app-container"},c.createElement(E,null),c.createElement("main",{className:"container"},c.createElement("div",{className:"canvas-container"},c.createElement("div",{className:"canvas"},c.createElement("canvas",{ref:O}),!R&&c.createElement("span",{className:"canvas-hint"},"Start drawing!"," ",c.createElement("span",{role:"img","aria-label":"paintbrush"},"\ud83d\udd8c"))),c.createElement("div",{className:"canvas"},c.createElement("canvas",{ref:v}))),c.createElement("div",{className:"controls"},c.createElement("div",null,c.createElement(h,{current:n,onChange:r})),c.createElement("div",null,c.createElement(b,{current:m,onChange:d})),c.createElement("div",null,c.createElement("button",{className:"reset-button",onClick:S},"Reset")))),c.createElement(g,null))};l.a.render(r.a.createElement(v,null),document.getElementById("root"))}],[[4,1,2]]]);
//# sourceMappingURL=main.2ba4cb32.chunk.js.map