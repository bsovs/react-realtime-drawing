(this["webpackJsonpreact-realtime-drawing-example"]=this["webpackJsonpreact-realtime-drawing-example"]||[]).push([[0],[,,,,function(e,t,n){e.exports=n(11)},function(e,t,n){},,,,,function(e,t,n){},function(e,t,n){"use strict";n.r(t);n(5);var r=n(0),c=n.n(r),a=n(3),o=n.n(a),l=n(1),i=(n(10),function(e){var t=e.ref,n=e.ctx,c=e.onReset;return Object(r.useCallback)((function(){if(n&&t.current){c&&c();var e=n.canvas.getBoundingClientRect(),r=e.height,a=e.width;n.clearRect(0,0,a*window.devicePixelRatio,r*window.devicePixelRatio);var o=t.current.getContext("2d");o&&o.clearRect(0,0,a*window.devicePixelRatio,r*window.devicePixelRatio)}}),[n,t,c])}),u=function(e){var t=e.ref,n=e.ctx,c=e.onApply;return Object(r.useCallback)((function(){if(n&&t.current){c&&c();var e=t.current.getContext("2d");e&&(e.drawImage(n.canvas,0,0),n.clearRect(0,0,n.canvas.width,n.canvas.height))}}),[n,t,c])},s=function(e){var t=e.ctx,n=e.onDraw;return Object(r.useCallback)((function(e){if(n&&n(e),t&&e.length){var r=t.canvas.getBoundingClientRect(),c=r.width,a=r.height;if(t.lineJoin="round",t.lineCap="round",t.strokeStyle=e[0].color,t.fillStyle=e[0].color,t.lineWidth=Math.floor(e[0].strokeWidth*Math.sqrt(Math.pow(c,2)+Math.pow(a,2))),t.clearRect(0,0,c,a),e.length<3)return t.beginPath(),t.arc(e[0].x*c,e[0].y*a,t.lineWidth/2,0,2*Math.PI),t.fill(),void t.closePath();t.beginPath(),t.moveTo(e[0].x*c,e[0].y*a);for(var o=1;o<e.length-2;o++)t.quadraticCurveTo(e[o].x*c,e[o].y*a,(e[o].x+e[o+1].x)*c/2,(e[o].y+e[o+1].y)*a/2);t.quadraticCurveTo(e[o].x*c,e[o].y*a,e[o+1].x*c,e[o+1].y*a),t.stroke()}}),[t,n])};const m=["#134e6f","#ff6150","#1ac0c6"],h=({current:e,onChange:t})=>r.createElement("figure",{className:"control"},r.createElement("figcaption",null,"Colors"),r.createElement("ul",null,m.map(n=>r.createElement("li",{key:n},r.createElement(d,{color:n,onClick:t,active:e===n}))))),d=({color:e,onClick:t,active:n})=>{const c=r.useCallback(()=>{t(e)},[t,e]);return r.createElement("button",{className:"swatch-button".concat(n?" active":""),style:{backgroundColor:e},onClick:c,"aria-label":"Select ".concat(e," color"),title:"Select ".concat(e," color")})},f=[8,16,32],v=({current:e,onChange:t})=>r.createElement("figure",{className:"control"},r.createElement("figcaption",null,"Sizes"),r.createElement("ul",null,f.map(n=>r.createElement("li",{key:n},r.createElement(p,{size:n,onClick:t,active:e===n}))))),p=({size:e,onClick:t,active:n})=>{const c=r.useCallback(()=>{t(e)},[t,e]);return r.createElement("button",{className:"size-button".concat(n?" active":""),onClick:c,"aria-label":"Select  ".concat(e),title:"Select size ".concat(e)},r.createElement("div",{style:{height:e,width:e}}))},g=()=>r.createElement("footer",{className:"app-footer"},r.createElement("p",null,r.createElement("span",{role:"img","aria-label":"rocket emoji"},"\ud83d\ude80"),"Made by ",r.createElement("a",{href:"https://www.jsaari.com/",rel:"noreferrer noopener"},"Jim Saari"))),b=()=>r.createElement("header",{className:"app-header"},r.createElement("h1",null,"React Realtime Drawing"),r.createElement("a",{className:"app-repository",href:"https://github.com/jsaari97/react-realtime-drawing",title:"View project repository","aria-label":"View project repository"},r.createElement("svg",{"aria-hidden":!0,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},r.createElement("path",{d:"M12,2.2467A10.00042,10.00042,0,0,0,8.83752,21.73419c.5.08752.6875-.21247.6875-.475,0-.23749-.01251-1.025-.01251-1.86249C7,19.85919,6.35,18.78423,6.15,18.22173A3.636,3.636,0,0,0,5.125,16.8092c-.35-.1875-.85-.65-.01251-.66248A2.00117,2.00117,0,0,1,6.65,17.17169a2.13742,2.13742,0,0,0,2.91248.825A2.10376,2.10376,0,0,1,10.2,16.65923c-2.225-.25-4.55-1.11254-4.55-4.9375a3.89187,3.89187,0,0,1,1.025-2.6875,3.59373,3.59373,0,0,1,.1-2.65s.83747-.26251,2.75,1.025a9.42747,9.42747,0,0,1,5,0c1.91248-1.3,2.75-1.025,2.75-1.025a3.59323,3.59323,0,0,1,.1,2.65,3.869,3.869,0,0,1,1.025,2.6875c0,3.83747-2.33752,4.6875-4.5625,4.9375a2.36814,2.36814,0,0,1,.675,1.85c0,1.33752-.01251,2.41248-.01251,2.75,0,.26251.1875.575.6875.475A10.0053,10.0053,0,0,0,12,2.2467Z"}))));var E=()=>{const e=r.useState("#134e6f"),t=Object(l.a)(e,2),n=t[0],c=t[1],a=r.useState(16),o=Object(l.a)(a,2),m=o[0],d=o[1],f=function(){var e=Object(r.useRef)(null),t=Object(r.useState)(null),n=t[0],c=t[1],a=Object(r.useRef)(0),o=Object(r.useState)(!1),l=o[0],m=o[1],h=Object(r.useCallback)((function(){a.current=0}),[]),d=u({ref:e,ctx:n,onApply:h}),f=Object(r.useCallback)((function(e){l||m(!0),1===e.length&&0===a.current||e.length<a.current?d():a.current=e.length}),[d,l]),v=s({ctx:n,onDraw:f}),p=Object(r.useCallback)((function(){a.current=0,m(!1)}),[]),g=i({ref:e,ctx:n,onReset:p});return Object(r.useEffect)((function(){if(e.current){if(n)return;if(!e.current.parentElement)return void console.warn("canvas needs to be inside a parent node");var t=e.current.parentElement.getBoundingClientRect(),r=t.width,a=t.height;e.current.parentElement.style.position="relative",e.current.height=a,e.current.width=r;var o=document.createElement("canvas");o.style.position="absolute",o.style.left="0",o.style.top="0",o.height=a,o.width=r,o.style.pointerEvents="none",e.current.parentElement.insertAdjacentElement("beforeend",o),c(o.getContext("2d"))}}),[e,n]),[e,v,{reset:g,dirty:l}]}(),p=Object(l.a)(f,3),E=p[0],w=p[1],C=p[2].reset,y=function(e){var t=void 0===e?{}:e,n=t.strokeWidth,c=void 0===n?16:n,a=t.color,o=void 0===a?"#000":a,l=t.onChange,m=Object(r.useRef)(null),h=Object(r.useState)(null),d=h[0],f=h[1],v=Object(r.useRef)(0),p=Object(r.useRef)([]),g=Object(r.useState)(0),b=g[0],E=g[1],w=Object(r.useState)(!1),C=w[0],y=w[1],j=Object(r.useState)(!1),k=j[0],x=j[1],O=Object(r.useCallback)((function(){x(!1),m.current&&d&&(m.current.onmousemove=null,m.current.ontouchmove=null,p.current=[],v.current=0)}),[m,d]),R=u({ref:m,ctx:d,onApply:O}),S=s({ctx:d}),N=Object(r.useCallback)((function(e){if(m.current&&(v.current++,v.current%1===0||v.current<2)){var t=m.current.getBoundingClientRect(),n=t.width,r=t.height,a=t.left,i=t.top,u=e instanceof MouseEvent?e.pageX:e.changedTouches[0].pageX,s=e instanceof MouseEvent?e.pageY:e.changedTouches[0].pageY,h={x:Math.floor(u-a-window.pageXOffset)/n,y:Math.floor(s-i-window.pageYOffset)/r,color:o,strokeWidth:c/Math.sqrt(Math.pow(n,2)+Math.pow(r,2)),ratio:b};p.current.push(h),C||y(!0),l&&l(p.current),S(p.current)}}),[m,S,o,c,l,b,C]);Object(r.useEffect)((function(){if(m.current){if(d)return;if(!m.current.parentElement)return void console.warn("canvas needs to be inside a parent node");var e=m.current.parentElement.getBoundingClientRect(),t=e.width,n=e.height;m.current.parentElement.style.position="relative",m.current.height=n,m.current.width=t,m.current.style.touchAction="none",E(t/n);var r=document.createElement("canvas");r.style.position="absolute",r.style.left="0",r.style.top="0",r.height=n,r.width=t,r.style.pointerEvents="none",m.current.parentElement.insertAdjacentElement("beforeend",r),f(r.getContext("2d"))}}),[m,d]),Object(r.useEffect)((function(){if(m.current){var e=function(e){x(!0),N(e)};"ontouchstart"in window?(m.current.ontouchstart=e,m.current.ontouchend=R,m.current.ontouchcancel=R):(m.current.onmousedown=e,m.current.onmouseleave=R,m.current.onmouseup=R)}}),[m,S,R,N]),Object(r.useEffect)((function(){k&&m.current&&("ontouchstart"in window?m.current.ontouchmove=N:m.current.onmousemove=N)}),[k,m.current,d]);var M=Object(r.useCallback)((function(){v.current=0,p.current=[],y(!1)}),[]),A=i({ref:m,ctx:d,onReset:M});return[m,{reset:A,dirty:C}]}({color:n,strokeWidth:m,onChange:w}),j=Object(l.a)(y,2),k=j[0],x=j[1],O=x.reset,R=x.dirty,S=r.useCallback(()=>{O(),C()},[O,C]);return console.log(R),r.createElement("div",{className:"app-container"},r.createElement(b,null),r.createElement("main",{className:"container"},r.createElement("div",{className:"canvas-container"},r.createElement("div",{className:"canvas"},r.createElement("canvas",{ref:k}),!R&&r.createElement("span",{className:"canvas-hint"},"Start drawing!"," ",r.createElement("span",{role:"img","aria-label":"paintbrush"},"\ud83d\udd8c"))),r.createElement("div",{className:"canvas"},r.createElement("canvas",{ref:E}))),r.createElement("div",{className:"controls"},r.createElement("div",null,r.createElement(h,{current:n,onChange:c})),r.createElement("div",null,r.createElement(v,{current:m,onChange:d})),r.createElement("div",null,r.createElement("button",{className:"reset-button",onClick:S},"Reset")))),r.createElement(g,null))};o.a.render(c.a.createElement(E,null),document.getElementById("root"))}],[[4,1,2]]]);
//# sourceMappingURL=main.9c6f9306.chunk.js.map