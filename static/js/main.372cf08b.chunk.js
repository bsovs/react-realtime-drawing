(this["webpackJsonpreact-realtime-drawing-example"]=this["webpackJsonpreact-realtime-drawing-example"]||[]).push([[0],{11:function(e,t,n){},12:function(e,t,n){"use strict";n.r(t);var c=n(0),r=(n(7),n(1)),a=n(4),i=n.n(a),o=n(2),s=(n(11),function(e){var t=e.ref,n=e.ctx,c=e.onReset;return Object(r.useCallback)((function(){if(n&&t.current){c&&c();var e=n.canvas.getBoundingClientRect(),r=e.height,a=e.width;n.clearRect(0,0,a*window.devicePixelRatio,r*window.devicePixelRatio);var i=t.current.getContext("2d");i&&i.clearRect(0,0,a*window.devicePixelRatio,r*window.devicePixelRatio)}}),[n,t,c])}),l=function(e){var t=e.ref,n=e.ctx,c=e.onApply;return Object(r.useCallback)((function(){if(n&&t.current){c&&c();var e=t.current.getContext("2d");e&&(e.drawImage(n.canvas,0,0),n.clearRect(0,0,n.canvas.width,n.canvas.height))}}),[n,t,c])},u=function(e){var t=e.ctx,n=e.onDraw;return Object(r.useCallback)((function(e){if(n&&n(e),t&&e.length){var c=t.canvas.getBoundingClientRect(),r=c.width,a=c.height;if(t.lineJoin="round",t.lineCap="round",t.strokeStyle=e[0].color,t.fillStyle=e[0].color,t.lineWidth=Math.floor(e[0].strokeWidth*Math.sqrt(Math.pow(r,2)+Math.pow(a,2))),t.clearRect(0,0,r,a),e.length<3)return t.beginPath(),t.arc(e[0].x*r,e[0].y*a,t.lineWidth/2,0,2*Math.PI),t.fill(),void t.closePath();t.beginPath(),t.moveTo(e[0].x*r,e[0].y*a);for(var i=1;i<e.length-2;i++)t.quadraticCurveTo(e[i].x*r,e[i].y*a,(e[i].x+e[i+1].x)*r/2,(e[i].y+e[i+1].y)*a/2);t.quadraticCurveTo(e[i].x*r,e[i].y*a,e[i+1].x*r,e[i+1].y*a),t.stroke()}}),[t,n])},h=["#134e6f","#ff6150","#1ac0c6"],d=function(e){var t=e.current,n=e.onChange;return Object(c.jsxs)("figure",{className:"control",children:[Object(c.jsx)("figcaption",{children:"Colors"}),Object(c.jsx)("ul",{children:h.map((function(e){return Object(c.jsx)("li",{children:Object(c.jsx)(j,{color:e,onClick:n,active:t===e})},e)}))})]})},j=function(e){var t=e.color,n=e.onClick,a=e.active,i=r.useCallback((function(){n(t)}),[n,t]);return Object(c.jsx)("button",{className:"swatch-button".concat(a?" active":""),style:{backgroundColor:t},onClick:i,"aria-label":"Select ".concat(t," color"),title:"Select ".concat(t," color")})},b=[8,16,32],f=function(e){var t=e.current,n=e.onChange;return Object(c.jsxs)("figure",{className:"control",children:[Object(c.jsx)("figcaption",{children:"Sizes"}),Object(c.jsx)("ul",{children:b.map((function(e){return Object(c.jsx)("li",{children:Object(c.jsx)(v,{size:e,onClick:n,active:t===e})},e)}))})]})},v=function(e){var t=e.size,n=e.onClick,a=e.active,i=r.useCallback((function(){n(t)}),[n,t]);return Object(c.jsx)("button",{className:"size-button".concat(a?" active":""),onClick:i,"aria-label":"Select  ".concat(t),title:"Select size ".concat(t),children:Object(c.jsx)("div",{style:{height:t,width:t}})})},p=function(){return Object(c.jsx)("footer",{className:"app-footer",children:Object(c.jsxs)("p",{children:[Object(c.jsx)("span",{role:"img","aria-label":"rocket emoji",children:"\ud83d\ude80"}),"Made by ",Object(c.jsx)("a",{href:"https://www.jsaari.com/",rel:"noreferrer noopener",children:"Jim Saari"})]})})},O=function(){return Object(c.jsxs)("header",{className:"app-header",children:[Object(c.jsx)("h1",{children:"React Realtime Drawing"}),Object(c.jsx)("a",{className:"app-repository",href:"https://github.com/jsaari97/react-realtime-drawing",title:"View project repository","aria-label":"View project repository",children:Object(c.jsx)("svg",{"aria-hidden":!0,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:Object(c.jsx)("path",{d:"M12,2.2467A10.00042,10.00042,0,0,0,8.83752,21.73419c.5.08752.6875-.21247.6875-.475,0-.23749-.01251-1.025-.01251-1.86249C7,19.85919,6.35,18.78423,6.15,18.22173A3.636,3.636,0,0,0,5.125,16.8092c-.35-.1875-.85-.65-.01251-.66248A2.00117,2.00117,0,0,1,6.65,17.17169a2.13742,2.13742,0,0,0,2.91248.825A2.10376,2.10376,0,0,1,10.2,16.65923c-2.225-.25-4.55-1.11254-4.55-4.9375a3.89187,3.89187,0,0,1,1.025-2.6875,3.59373,3.59373,0,0,1,.1-2.65s.83747-.26251,2.75,1.025a9.42747,9.42747,0,0,1,5,0c1.91248-1.3,2.75-1.025,2.75-1.025a3.59323,3.59323,0,0,1,.1,2.65,3.869,3.869,0,0,1,1.025,2.6875c0,3.83747-2.33752,4.6875-4.5625,4.9375a2.36814,2.36814,0,0,1,.675,1.85c0,1.33752-.01251,2.41248-.01251,2.75,0,.26251.1875.575.6875.475A10.0053,10.0053,0,0,0,12,2.2467Z"})})})]})},x=function(){var e=r.useState("#134e6f"),t=Object(o.a)(e,2),n=t[0],a=t[1],i=r.useState(16),h=Object(o.a)(i,2),j=h[0],b=h[1],v=function(){var e=Object(r.useRef)(null),t=Object(r.useState)(null),n=t[0],c=t[1],a=Object(r.useRef)(0),i=Object(r.useState)(!1),o=i[0],h=i[1],d=Object(r.useCallback)((function(){a.current=0}),[]),j=l({ref:e,ctx:n,onApply:d}),b=Object(r.useCallback)((function(e){o||h(!0),1===e.length&&0===a.current||e.length<a.current?j():a.current=e.length}),[j,o]),f=u({ctx:n,onDraw:b}),v=Object(r.useCallback)((function(){a.current=0,h(!1)}),[]),p=s({ref:e,ctx:n,onReset:v});return Object(r.useEffect)((function(){if(e.current){if(n)return;if(!e.current.parentElement)return void console.warn("canvas needs to be inside a parent node");var t=e.current.parentElement.getBoundingClientRect(),r=t.width,a=t.height;e.current.parentElement.style.position="relative",e.current.height=a,e.current.width=r;var i=document.createElement("canvas");i.style.position="absolute",i.style.left="0",i.style.top="0",i.height=a,i.width=r,i.style.pointerEvents="none",e.current.parentElement.insertAdjacentElement("beforeend",i),c(i.getContext("2d"))}}),[e,n]),[e,f,{reset:p,dirty:o}]}(),x=Object(o.a)(v,3),g=x[0],m=x[1],w=x[2].reset,C=function(e){var t=void 0===e?{}:e,n=t.strokeWidth,c=void 0===n?16:n,a=t.color,i=void 0===a?"#000":a,o=t.onChange,h=Object(r.useRef)(null),d=Object(r.useState)(null),j=d[0],b=d[1],f=Object(r.useRef)(0),v=Object(r.useRef)([]),p=Object(r.useState)(0),O=p[0],x=p[1],g=Object(r.useState)(!1),m=g[0],w=g[1],C=Object(r.useState)(!1),y=C[0],k=C[1],R=Object(r.useCallback)((function(){k(!1),h.current&&j&&(h.current.onmousemove=null,h.current.ontouchmove=null,v.current=[],f.current=0)}),[h,j]),E=l({ref:h,ctx:j,onApply:R}),S=u({ctx:j}),N=Object(r.useCallback)((function(e){if(h.current&&(f.current++,f.current%1===0||f.current<2)){var t=h.current.getBoundingClientRect(),n=t.width,r=t.height,a=t.left,s=t.top,l=e instanceof MouseEvent?e.pageX:e.changedTouches[0].pageX,u=e instanceof MouseEvent?e.pageY:e.changedTouches[0].pageY,d={x:Math.floor(l-a-window.pageXOffset)/n,y:Math.floor(u-s-window.pageYOffset)/r,color:i,strokeWidth:c/Math.sqrt(Math.pow(n,2)+Math.pow(r,2)),ratio:O};v.current.push(d),m||w(!0),o&&o(v.current),S(v.current)}}),[h,S,i,c,o,O,m]);Object(r.useEffect)((function(){if(h.current){if(j)return;if(!h.current.parentElement)return void console.warn("canvas needs to be inside a parent node");var e=h.current.parentElement.getBoundingClientRect(),t=e.width,n=e.height;h.current.parentElement.style.position="relative",h.current.height=n,h.current.width=t,h.current.style.touchAction="none",x(t/n);var c=document.createElement("canvas");c.style.position="absolute",c.style.left="0",c.style.top="0",c.height=n,c.width=t,c.style.pointerEvents="none",h.current.parentElement.insertAdjacentElement("beforeend",c),b(c.getContext("2d"))}}),[h,j]),Object(r.useEffect)((function(){if(h.current){var e=function(e){k(!0),N(e)};"ontouchstart"in window?(h.current.ontouchstart=e,h.current.ontouchend=E,h.current.ontouchcancel=E):(h.current.onmousedown=e,h.current.onmouseleave=E,h.current.onmouseup=E)}}),[h,S,E,N]),Object(r.useEffect)((function(){y&&h.current&&("ontouchstart"in window?h.current.ontouchmove=N:h.current.onmousemove=N)}),[y,h.current,j]);var M=Object(r.useCallback)((function(){f.current=0,v.current=[],w(!1)}),[]),A=s({ref:h,ctx:j,onReset:M});return[h,{reset:A,dirty:m}]}({color:n,strokeWidth:j,onChange:m}),y=Object(o.a)(C,2),k=y[0],R=y[1],E=R.reset,S=R.dirty,N=r.useCallback((function(){E(),w()}),[E,w]);return console.log(S),Object(c.jsxs)("div",{className:"app-container",children:[Object(c.jsx)(O,{}),Object(c.jsxs)("main",{className:"container",children:[Object(c.jsxs)("div",{className:"canvas-container",children:[Object(c.jsxs)("div",{className:"canvas",children:[Object(c.jsx)("canvas",{ref:k}),!S&&Object(c.jsxs)("span",{className:"canvas-hint",children:["Start drawing!"," ",Object(c.jsx)("span",{role:"img","aria-label":"paintbrush",children:"\ud83d\udd8c"})]})]}),Object(c.jsx)("div",{className:"canvas",children:Object(c.jsx)("canvas",{ref:g})})]}),Object(c.jsxs)("div",{className:"controls",children:[Object(c.jsx)("div",{children:Object(c.jsx)(d,{current:n,onChange:a})}),Object(c.jsx)("div",{children:Object(c.jsx)(f,{current:j,onChange:b})}),Object(c.jsx)("div",{children:Object(c.jsx)("button",{className:"reset-button",onClick:N,children:"Reset"})})]})]}),Object(c.jsx)(p,{})]})};i.a.render(Object(c.jsx)(x,{}),document.getElementById("root"))},7:function(e,t,n){}},[[12,1,2]]]);
//# sourceMappingURL=main.372cf08b.chunk.js.map